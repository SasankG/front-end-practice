<!DOCTYPE html>
<html lang="en">

<head>
    <!--TicTacToe interview question, have to code the whole game using HTML/CSS/JS -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="main.css" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <title>TicTacToe</title>
</head>

<body>
    <div class="container">
        <div class="gameBoard">
            <div class="row1">
                <div class="box" id="x1" onclick="checkTurn(this.id)">x1</div>
                <div class="box" id="x2" onclick="checkTurn(this.id)">x2</div>
                <div class="box" id="x3" onclick="checkTurn(this.id)">x3</div>
            </div>
            <div class="row2">
                <div class="box " id="y1" onclick="checkTurn(this.id)">y1</div>
                <div class="box " id="y2" onclick="checkTurn(this.id)">y2</div>
                <div class="box " id="y3" onclick="checkTurn(this.id)">y3</div>
            </div>
            <div class="row3">
                <div class="box" id="z1" onclick="checkTurn(this.id)">z1 </div>
                <div class="box" id="z2" onclick="checkTurn(this.id)">z2 </div>
                <div class="box" id="z3" onclick="checkTurn(this.id)">z3 </div>
            </div>
        </div>
    </div>
</body>
<script>
    $(document).ready(function () {
        // Game object
        let game = {
            turn: true,
        }

        // check whos turn 
        checkTurn = (id) => {
            if (game.turn == true) {
                // player turn
                $('#' + id).html("X");
                $("#" + id).css({ backgroundColor: 'blue' })
                // Make block unclickable
                $('#' + id).removeAttr('onclick')
                $('#' + id).addClass("chosenBlue")
                // set turn to false
                game.turn = false;
                // check for win
                gameCheck()
            } else if (game.turn == false) {
                $('#' + id).html("O");
                $("#" + id).css({ backgroundColor: 'red' })
                $('#' + id).removeAttr('onClick')
                $('#' + id).addClass("chosenRed")
                // back to player
                game.turn = true
                //check for win
                gameCheck()
            }

            if (game.turn == false) {
                // computer turn
                computerTurn()
            }
        }

        // Computer chooses random
        computerTurn = () => {
            let unchosen = document.querySelectorAll('div.box:not(.chosenBlue):not(.chosenRed)');
            // pick random id
            let randomPick = unchosen[Math.floor(Math.random() * unchosen.length)];
            let randomId = randomPick.id
            console.log(randomId);
            console.log(randomPick);
            // Computers turn with some random block
            checkTurn(randomId);
        }

        // Game Status
        gameCheck = () => {
            // All possible wins
            switch (true) {
                // If player wins
                // rows
                case $('#x1').html() === 'X' && $('#x2').html() === 'X' && $('#x3').html() === 'X':
                    playerWin();
                    break;
                case $('#y1').html() === 'X' && $('#y2').html() === 'X' && $('#y3').html() === 'X':
                    playerWin();
                    break;
                case $('#z1').html() === 'X' && $('#z2').html() === 'X' && $('#z3').html() === 'X':
                    playerWin();
                    break;
                // columns
                case $('#x1').html() === 'X' && $('#y1').html() === 'X' && $('#z1').html() === 'X':
                    playerWin();
                    break;
                case $('#x2').html() === 'X' && $('#y2').html() === 'X' && $('#z2').html() === 'X':
                    playerWin();
                    break;
                case $('#x3').html() === 'X' && $('#y3').html() === 'X' && $('#z3').html() === 'X':
                    playerWin();
                    break;
                // diagonals
                case $('#x1').html() === 'X' && $('#y2').html() === 'X' && $('#z3').html() === 'X':
                    playerWin();
                    break;
                case $('#x3').html() === 'X' && $('#y2').html() === 'X' && $('#z1').html() === 'X':
                    playerWin();
                    break;

                // If computer wins
                // rows
                case $('#x1').html() === 'O' && $('#x2').html() === 'O' && $('#x3').html() === 'O':
                    compWin();
                    break;
                case $('#y1').html() === 'O' && $('#y2').html() === 'O' && $('#y3').html() === 'O':
                    compWin();
                    break;
                case $('#z1').html() === 'O' && $('#z2').html() === 'O' && $('#z3').html() === 'O':
                    compWin();
                    break;
                // columns
                case $('#x1').html() === 'O' && $('#y1').html() === 'O' && $('#z1').html() === 'O':
                    compWin();
                    break;
                case $('#x2').html() === 'O' && $('#y2').html() === 'O' && $('#z2').html() === 'O':
                    compWin();
                    break;
                case $('#x3').html() === 'O' && $('#y3').html() === 'O' && $('#z3').html() === 'O':
                    compWin();
                    break;
                // diagonals
                case $('#x1').html() === 'O' && $('#y2').html() === 'O' && $('#z3').html() === 'O':
                    compWin();
                    break;
                case $('#x3').html() === 'O' && $('#y2').html() === 'O' && $('#z1').html() === 'O':
                    compWin();
                    break;
            }

        }

        // player win
        playerWin = () => {
            alert("YOU WON!")
            alert("Reloading")
            setTimeout(location.reload(), 1200);
        }

        // computerwin
        compWin = () => {
            alert("YOU LOST!")
            alert("Reloading")
            setTimeout(location.reload(), 1200);
        }
    })
</script>

</html>